<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Luxury Villa Rental</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
	<link rel="stylesheet" href="./css/icons.min.css">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="./css/owl.carousel.min.css">
	<link rel="stylesheet" href="./css/owl.theme.default.min.css">
	<link rel="stylesheet" href="./css/index.css">
	<style>
		.dot-pill {
			width: 20px;
			height: 8px;
			border-radius: 5px;
			background-color: #666666;
			transition: background-color 0.3s ease;
			opacity: 0.8;
		}

		.dot-pill.active {
			background-color: #0d1b2a;
			opacity: 1;
		}

		#prevSlideBtn:hover,
		#nextSlideBtn:hover {
			filter: brightness(1.1);
			cursor: pointer;
		}
		.custom-tab-wrapper .nav-tabs {
			background-color: #f6f9fc;
			border-radius: 12px;
		}

		.nav-tabs .nav-item.show .nav-link, .nav-tabs .nav-link.active {
			background-color: #f6f9fc;
		}
		.custom-tab-wrapper .nav-link {
			background-color: transparent;
			border: none;
			color: #6c757d;
			display: flex;
			align-items: center;
			transition: all 0.3s ease;
		}

		.custom-tab-wrapper .nav-link i {
			font-size: 20px;
		}

		.custom-tab-wrapper .nav-link.active {
			color: #155E97;
			border-radius: 8px;
		}
		.modal-fullscreen .modal-body {
			height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
			overflow: hidden; /* Prevent scrolling */
		}

		.modal-fullscreen .modal-body img {
			max-height: 100%;
			max-width: 100%;
			object-fit: contain;
		}

		/* Custom FSLightbox Styles */
		#fslightboxModal .modal-content {
			background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
		}

		#fslightboxImage {
			max-height: 70vh;
			object-fit: contain;
			transition: all 0.3s ease;
			border-radius: 8px;
		}

		#fsPrevBtn, #fsNextBtn {
			transition: all 0.3s ease;
			z-index: 10;
		}

		#fsPrevBtn:hover, #fsNextBtn:hover {
			opacity: 1 !important;
			transform: scale(1.1);
		}

		.unit-tab {
			transition: all 0.3s ease;
			border-radius: 6px;
		}

		.unit-tab:hover {
			transform: translateY(-1px);
		}

		.thumbnail-item {
			width: 80px;
			height: 60px;
			border-radius: 6px;
			overflow: hidden;
			cursor: pointer;
			transition: all 0.3s ease;
			border: 2px solid transparent;
		}

		.thumbnail-item:hover {
			transform: scale(1.05);
			border-color: #007bff;
		}

		.thumbnail-item.active {
			border-color: #007bff;
			box-shadow: 0 0 10px rgba(0, 123, 255, 0.5);
		}

		.thumbnail-item img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		#thumbnailGallery {
			scrollbar-width: thin;
			scrollbar-color: #666 #333;
		}

		#thumbnailGallery::-webkit-scrollbar {
			height: 6px;
		}

		#thumbnailGallery::-webkit-scrollbar-track {
			background: #333;
			border-radius: 3px;
		}

		#thumbnailGallery::-webkit-scrollbar-thumb {
			background: #666;
			border-radius: 3px;
		}

		#thumbnailGallery::-webkit-scrollbar-thumb:hover {
			background: #888;
		}

		/* Image fade transition */
		.image-fade {
			opacity: 0;
			transform: scale(0.95);
		}

		.image-fade.show {
			opacity: 1;
			transform: scale(1);
		}
	</style>
</head>
<body>
	<!-- Navigation -->
	<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
		<div class="container">
			<a class="navbar-brand fw-bold" href="#">PropertyRent</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav me-auto">
					<li class="nav-item">
						<a class="nav-link active" href="#">Home</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">Properties</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">About</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">Contact</a>
					</li>
				</ul>
				<div class="d-flex">
					<button class="btn btn-outline-primary me-2">Login</button>
					<button class="btn btn-primary">Sign Up</button>
				</div>
			</div>
		</div>
	</nav>

	<main class="container mt-4">
		<section class="d-flex justify-content-between align-items-center mb-4">
			<div class="fw-bold h3">
				<div>Seaside Serenity Villa</div>
			</div>
			<button class="btn btn-outline-primary">
				<i class="ri-map-pin-fill"></i> Malibu, California
			</button>
		</section>
		<section class="card border border-1 border-primary mb-4 rounded-2 property-image-card">
			<div class="card-body">
				<!-- Thumbnail Strip -->
				<div class="card">
					<div class="card-body rounded-3">
						<div class="thumbnail-scroll d-flex align-items-center overflow-auto">
						<img src="./images/Image.png" alt="Thumb 1" class="img-fluid me-2" style="height: 60px; cursor: pointer;">
						<img src="./images/Image-2.png" alt="Thumb 2" class="img-fluid me-2" style="height: 60px; cursor: pointer;">
						<img src="./images/Image-3.png" alt="Thumb 3" class="img-fluid me-2" style="height: 60px; cursor: pointer;">
						<img src="./images/Image-4.png" alt="Thumb 4" class="img-fluid me-2" style="height: 60px; cursor: pointer;">
						<img src="./images/Image-5.png" alt="Thumb 5" class="img-fluid me-2" style="height: 60px; cursor: pointer;">
						</div>
					</div>
				</div>

				<!-- Owl Carousel Slides -->
				<div class="owl-carousel mt-3" id="imageSlider">
					<div class="item">
						<div class="row g-3">
						<div class="col-md-6">
							<img src="./images/main-image-1.png" class="img-fluid rounded" />
						</div>
						<div class="col-md-6">
							<img src="./images/main-image-2.png" class="img-fluid rounded" />
						</div>
						</div>
					</div>
					<div class="item">
						<div class="row g-3">
						<div class="col-md-6">
							<img src="./images/Image-3.png" class="img-fluid rounded" />
						</div>
						<div class="col-md-6">
							<img src="./images/Image-4.png" class="img-fluid rounded" />
						</div>
						</div>
					</div>
					<div class="item">
						<div class="row g-3">
						<div class="col-md-6">
							<img src="./images/Image-3.png" class="img-fluid rounded" />
						</div>
						<div class="col-md-6">
							<img src="./images/Image-4.png" class="img-fluid rounded" />
						</div>
						</div>
					</div>
					<div class="item">
						<div class="row g-3">
						<div class="col-md-6">
							<img src="./images/Image-3.png" class="img-fluid rounded" />
						</div>
						<div class="col-md-6">
							<img src="./images/Image-4.png" class="img-fluid rounded" />
						</div>
						</div>
					</div>
					<div class="item">
						<div class="row g-3">
						<div class="col-md-6">
							<img src="./images/Image-3.png" class="img-fluid rounded" />
						</div>
						<div class="col-md-6">
							<img src="./images/Image-4.png" class="img-fluid rounded" />
						</div>
						</div>
					</div>
				<!-- Add more .item blocks as needed -->
				</div>
				<!-- Carousel Controls Styled Like Image -->
				<div class="d-flex justify-content-between align-items-center bg-white rounded-pill px-3 py-2 shadow-sm" style="max-width: 360px; margin: auto;">

				
				<!-- Left Arrow -->
				<button id="prevSlideBtn" class="d-flex justify-content-center align-items-center" style="
					width: 48px;
					height: 48px;
					border-radius: 50%;
					border: 2px solid #0d1b2a;
					background-color: white;
					color: #0d1b2a;
				">
					<i class="ri-arrow-left-line" style="font-size: 20px;"></i>
				</button>

				<!-- Dots Track -->
				<div class="d-flex flex-grow-1 justify-content-center align-items-center gap-2">
					<div class="dot-pill active"></div>
					<div class="dot-pill"></div>
					<div class="dot-pill"></div>
					<div class="dot-pill"></div>
					<div class="dot-pill"></div>
				</div>

				<!-- Right Arrow -->
				<button id="nextSlideBtn" class="d-flex justify-content-center align-items-center" style="
					width: 48px;
					height: 48px;
					border-radius: 50%;
					border: none;
					background-color: #0d1b2a;
					color: white;
				">
					<i class="ri-arrow-right-line" style="font-size: 20px;"></i>
				</button>
				</div>
			</div>
		</section>
		<section class="mb-4">
			<div class="row">
				<div class="col-md-8">
					<!-- Navigation Tabs -->
					<nav class="custom-tab-wrapper my-4">
						<div class="nav nav-tabs border-0 d-flex justify-content-around py-2 px-3" id="nav-tab" role="tablist">
							<button class="nav-link active fw-semibold d-flex align-items-center gap-2 px-4 py-2" id="nav-overview-tab" data-bs-toggle="tab" data-bs-target="#nav-overview" type="button" role="tab" aria-controls="nav-overview" aria-selected="true">
								<i class="ri-layout-grid-line"></i> Overview
							</button>
							<button class="nav-link fw-semibold d-flex align-items-center gap-2 px-4 py-2" id="nav-units-tab" data-bs-toggle="tab" data-bs-target="#nav-units" type="button" role="tab" aria-controls="nav-units" aria-selected="false">
								<i class="ri-grid-line"></i> Units
							</button>
							<button class="nav-link fw-semibold d-flex align-items-center gap-2 px-4 py-2" id="nav-amenities-tab" data-bs-toggle="tab" data-bs-target="#nav-amenities" type="button" role="tab" aria-controls="nav-amenities" aria-selected="false">
								<i class="ri-wireless-charging-line"></i> Amenities
							</button>
						</div>
					</nav>

					
					<!-- Tab Content -->
					<div class="tab-content mt-4" id="nav-tabContent">
						<!-- Overview Tab -->
						<div class="tab-pane fade show active" id="nav-overview" role="tabpanel" aria-labelledby="nav-overview-tab">
							<div class="mb-4">
								<h5 class="fw-bold mb-3">Property Description</h5>
								<p class="text-muted">
									Discover luxury at its finest in this stunning Seaside Serenity Villa. Located on the pristine shores of Malibu, this exquisite property offers breathtaking ocean views, modern amenities, and unparalleled comfort. Perfect for a romantic getaway or family vacation.
								</p>
							</div>
							
							<div class="row g-4">
								<div class="col-md-6">
									<div class="d-flex align-items-center mb-3">
										<i class="ri-building-line me-2 text-primary fs-5"></i>
										<span class="fw-semibold">4 Bedrooms</span>
									</div>
									<div class="d-flex align-items-center mb-3">
										<i class="ri-car-line me-2 text-primary fs-5"></i>
										<span class="fw-semibold">2 Car Garage</span>
									</div>
									<div class="d-flex align-items-center">
										<i class="ri-home-4-line me-2 text-primary fs-5"></i>
										<span class="fw-semibold">3,200 sq ft</span>
									</div>
								</div>
								<div class="col-md-6">
									<div class="d-flex align-items-center mb-3">
										<i class="ri-drop-line me-2 text-primary fs-5"></i>
										<span class="fw-semibold">3 Bathrooms</span>
									</div>
									<div class="d-flex align-items-center mb-3">
										<i class="ri-calendar-line me-2 text-primary fs-5"></i>
										<span class="fw-semibold">Built in 2018</span>
									</div>
									<div class="d-flex align-items-center">
										<i class="ri-landscape-line me-2 text-primary fs-5"></i>
										<span class="fw-semibold">Ocean View</span>
									</div>
								</div>
							</div>
						</div>
						
						<!-- Amenities Tab -->
						<div class="tab-pane fade" id="nav-amenities" role="tabpanel" aria-labelledby="nav-amenities-tab">
							<h5 class="fw-bold mb-4">Property Amenities</h5>
							<div class="row g-3">
								<div class="col-md-6">
									<div class="d-flex align-items-center mb-3">
										<i class="ri-wifi-line me-3 text-success fs-5"></i>
										<span>High-Speed WiFi</span>
									</div>
									<div class="d-flex align-items-center mb-3">
										<i class="ri-tv-line me-3 text-success fs-5"></i>
										<span>Smart TV</span>
									</div>
									<div class="d-flex align-items-center mb-3">
										<i class="ri-restaurant-line me-3 text-success fs-5"></i>
										<span>Full Kitchen</span>
									</div>
									<div class="d-flex align-items-center mb-3">
										<i class="ri-washing-machine-line me-3 text-success fs-5"></i>
										<span>Washer & Dryer</span>
									</div>
								</div>
								<div class="col-md-6">
									<div class="d-flex align-items-center mb-3">
										<i class="ri-temp-cold-line me-3 text-success fs-5"></i>
										<span>Air Conditioning</span>
									</div>
									<div class="d-flex align-items-center mb-3">
										<i class="ri-parking-line me-3 text-success fs-5"></i>
										<span>Free Parking</span>
									</div>
									<div class="d-flex align-items-center mb-3">
										<i class="ri-gamepad-line me-3 text-success fs-5"></i>
										<span>Pool & Hot Tub</span>
									</div>
									<div class="d-flex align-items-center mb-3">
										<i class="ri-shield-check-line me-3 text-success fs-5"></i>
										<span>Security System</span>
									</div>
								</div>
							</div>
						</div>
						
						<!-- Location Tab -->
						<div class="tab-pane fade" id="nav-location" role="tabpanel" aria-labelledby="nav-location-tab">
							<h5 class="fw-bold mb-4">Location & Nearby</h5>
							<div class="mb-4">
								<p class="text-muted">Located in the heart of Malibu, California, with easy access to beaches, restaurants, and entertainment.</p>
							</div>
							<div class="row g-3">
								<div class="col-md-6">
									<div class="d-flex align-items-center mb-3">
										<i class="ri-map-pin-line me-3 text-info fs-5"></i>
										<div>
											<div class="fw-semibold">Malibu Beach</div>
											<small class="text-muted">2 minutes walk</small>
										</div>
									</div>
									<div class="d-flex align-items-center mb-3">
										<i class="ri-store-line me-3 text-info fs-5"></i>
										<div>
											<div class="fw-semibold">Shopping Center</div>
											<small class="text-muted">5 minutes drive</small>
										</div>
									</div>
								</div>
								<div class="col-md-6">
									<div class="d-flex align-items-center mb-3">
										<i class="ri-restaurant-2-line me-3 text-info fs-5"></i>
										<div>
											<div class="fw-semibold">Fine Dining</div>
											<small class="text-muted">3 minutes walk</small>
										</div>
									</div>
									<div class="d-flex align-items-center mb-3">
										<i class="ri-plane-line me-3 text-info fs-5"></i>
										<div>
											<div class="fw-semibold">LAX Airport</div>
											<small class="text-muted">45 minutes drive</small>
										</div>
									</div>
								</div>
							</div>
						</div>
						
						<!-- Reviews Tab -->
						<div class="tab-pane fade" id="nav-reviews" role="tabpanel" aria-labelledby="nav-reviews-tab">
							<div class="d-flex justify-content-between align-items-center mb-4">
								<h5 class="fw-bold mb-0">Guest Reviews</h5>
								<div class="d-flex align-items-center">
									<span class="badge bg-success me-2">4.9</span>
									<div class="text-warning">
										<i class="ri-star-fill"></i>
										<i class="ri-star-fill"></i>
										<i class="ri-star-fill"></i>
										<i class="ri-star-fill"></i>
										<i class="ri-star-fill"></i>
									</div>
								</div>
							</div>
							
							<div class="card mb-3">
								<div class="card-body">
									<div class="d-flex justify-content-between align-items-start mb-2">
										<div class="fw-semibold">Sarah Johnson</div>
										<small class="text-muted">2 weeks ago</small>
									</div>
									<div class="text-warning mb-2">
										<i class="ri-star-fill"></i>
										<i class="ri-star-fill"></i>
										<i class="ri-star-fill"></i>
										<i class="ri-star-fill"></i>
										<i class="ri-star-fill"></i>
									</div>
									<p class="text-muted mb-0">"Absolutely stunning property! The ocean view is breathtaking and the amenities are top-notch. Perfect for our family vacation."</p>
								</div>
							</div>
							
							<div class="card">
								<div class="card-body">
									<div class="d-flex justify-content-between align-items-start mb-2">
										<div class="fw-semibold">Michael Chen</div>
										<small class="text-muted">1 month ago</small>
									</div>
									<div class="text-warning mb-2">
										<i class="ri-star-fill"></i>
										<i class="ri-star-fill"></i>
										<i class="ri-star-fill"></i>
										<i class="ri-star-fill"></i>
										<i class="ri-star-line"></i>
									</div>
									<p class="text-muted mb-0">"Great location and beautiful villa. The host was very responsive and helpful. Highly recommend!"</p>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-4">
					<div>
						<span class="badge badge-primary rounded-pill px-3 py-2"><i class="ri-heart-fill"></i></span>
						<span class="badge badge-primary rounded-pill px-3 py-2"><i class="ri-eye-line"></i></span>
						<span class="badge badge-primary rounded-pill px-3 py-2"><i class="ri-send-plane-line"></i></span>
					</div>
					<div class="card my-3" style="background-color: #f6f8fc; border-radius: 1.3rem;">
						<div class="card-body">
							<h4>Contact Info:</h4>
							<div class="my-3">
								<img src="./images/svg-icons/envelope.svg" alt="envelope" class="img-fluid mb-2" style="width: 24px;"> support@myrentalspot.com
							</div>
							<div class="my-3">
								<img src="./images/svg-icons/phone.svg" alt="phone" class="img-fluid mb-2" style="width: 24px;"> (123) 456-7890
							</div>
						</div>
					</div>
					<button class="btn btn-primary w-100 mt-3">
						<i class="ri-flag-line"></i>
						Report This Listing
					</button>
				</div>
			</div>
		</section>

		<!-- Lightbox Trigger Buttons -->
		<div class="d-flex gap-2 mb-4">
			<button type="button" class="btn btn-primary launch-lightbox" data-index="0">
				<i class="ri-image-line"></i> View Gallery
			</button>
			<button type="button" class="btn btn-outline-primary launch-lightbox" data-index="1">
				<i class="ri-eye-line"></i> View Image 2
			</button>
		</div>

		<!-- Custom FSLightbox Modal -->
		<div class="modal fade" id="fslightboxModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="fslightboxLabel" aria-hidden="true">
			<div class="modal-dialog modal-fullscreen">
				<div class="modal-content bg-dark">
					<!-- Modal Header -->
					<div class="modal-header border-0 bg-dark text-white">
						<div class="d-flex align-items-center">
							<button type="button" class="btn btn-outline-light me-3" id="backBtn">
								<i class="ri-arrow-left-line"></i> Back
							</button>
							<span class="fs-6 text-muted" id="imageCounter">1 of 5</span>
						</div>
						<button type="button" class="btn btn-outline-light" data-bs-dismiss="modal" aria-label="Close">
							<i class="ri-close-line"></i>
						</button>
					</div>

					<!-- Unit Selection Tabs -->
					<div class="px-4 py-2 bg-dark">
						<div class="d-flex gap-2" id="unitTabs">
							<button class="btn btn-sm btn-primary unit-tab active" data-unit="overview">Overview</button>
							<button class="btn btn-sm btn-outline-light unit-tab" data-unit="unit1">Unit 1</button>
							<button class="btn btn-sm btn-outline-light unit-tab" data-unit="unit2">Unit 2</button>
							<button class="btn btn-sm btn-outline-light unit-tab" data-unit="unit3">Unit 3</button>
							<button class="btn btn-sm btn-outline-light unit-tab" data-unit="unit4">Unit 4</button>
						</div>
					</div>

					<!-- Modal Body -->
					<div class="modal-body p-0 position-relative">
						<!-- Main Image Container -->
						<div class="position-relative h-100 d-flex align-items-center justify-content-center">
							<img id="fslightboxImage" class="img-fluid" src="" alt="Gallery Image" style="max-height: 70vh; object-fit: contain;">
							
							<!-- Navigation Arrows -->
							<button type="button" class="btn btn-light position-absolute start-0 top-50 translate-middle-y ms-3" id="fsPrevBtn" style="width: 50px; height: 50px; border-radius: 50%; opacity: 0.8;">
								<i class="ri-arrow-left-line"></i>
							</button>
							<button type="button" class="btn btn-light position-absolute end-0 top-50 translate-middle-y me-3" id="fsNextBtn" style="width: 50px; height: 50px; border-radius: 50%; opacity: 0.8;">
								<i class="ri-arrow-right-line"></i>
							</button>
						</div>

						<!-- Thumbnail Gallery -->
						<div class="position-absolute bottom-0 start-0 end-0 bg-dark bg-opacity-75 p-3">
							<div class="d-flex gap-2 overflow-auto" id="thumbnailGallery">
								<!-- Thumbnails will be populated by JavaScript -->
							</div>
						</div>
					</div>

					<!-- Modal Footer -->
					<div class="modal-footer border-0 bg-dark text-white">
						<div class="d-flex justify-content-between align-items-center w-100">
							<div class="text-muted">
								<span id="imageAddress">6G Ave, Pedro A. Rivera Km.4. #701, NY 41000</span>
							</div>
							<button class="btn btn-primary">
								<i class="ri-calendar-line"></i> Schedule a showing?
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>
<script src="./js/jquery.min.js"></script>
<script src="./js/owl.carousel.min.js"></script>
<script>
// Custom FSLightbox Implementation
class CustomFSLightbox {
    constructor() {
        this.images = [
            './images/main-image-1.png',
            './images/main-image-2.png',
            './images/Image-3.png',
            './images/Image-4.png',
            './images/Image-5.png',
            './images/Image-6.png',
            './images/Image-7.png'
        ];
        this.currentIndex = 0;
        this.currentUnit = 'overview';
        this.isTransitioning = false;
        
        this.init();
    }

    init() {
        this.bindEvents();
        this.populateThumbnails();
        this.updateImageCounter();
    }

    bindEvents() {
        // Lightbox trigger buttons
        $(document).on('click', '.launch-lightbox', (e) => {
            e.preventDefault();
            this.currentIndex = parseInt($(e.currentTarget).data('index'));
            this.openLightbox();
        });

        // Navigation buttons
        $('#fsPrevBtn').on('click', () => this.previousImage());
        $('#fsNextBtn').on('click', () => this.nextImage());

        // Unit tabs
        $('.unit-tab').on('click', (e) => {
            const unit = $(e.currentTarget).data('unit');
            this.switchUnit(unit);
        });

        // Thumbnail clicks
        $(document).on('click', '.thumbnail-item', (e) => {
            const index = parseInt($(e.currentTarget).data('index'));
            this.goToImage(index);
        });

        // Keyboard navigation
        $(document).on('keydown', (e) => {
            if ($('#fslightboxModal').hasClass('show')) {
                switch(e.key) {
                    case 'ArrowLeft':
                        e.preventDefault();
                        this.previousImage();
                        break;
                    case 'ArrowRight':
                        e.preventDefault();
                        this.nextImage();
                        break;
                    case 'Escape':
                        e.preventDefault();
                        this.closeLightbox();
                        break;
                }
            }
        });

        // Back button
        $('#backBtn').on('click', () => this.closeLightbox());

        // Modal close events
        $('#fslightboxModal').on('hidden.bs.modal', () => {
            this.resetLightbox();
        });
    }

    openLightbox() {
        $('#fslightboxModal').modal('show');
        this.updateMainImage();
        this.updateThumbnailSelection();
        this.updateImageCounter();
    }

    closeLightbox() {
        $('#fslightboxModal').modal('hide');
    }

    resetLightbox() {
        this.currentIndex = 0;
        this.currentUnit = 'overview';
        this.updateUnitTabs();
    }

    previousImage() {
        if (this.isTransitioning) return;
        
        this.currentIndex = (this.currentIndex - 1 + this.images.length) % this.images.length;
        this.updateMainImage();
        this.updateThumbnailSelection();
        this.updateImageCounter();
    }

    nextImage() {
        if (this.isTransitioning) return;
        
        this.currentIndex = (this.currentIndex + 1) % this.images.length;
        this.updateMainImage();
        this.updateThumbnailSelection();
        this.updateImageCounter();
    }

    goToImage(index) {
        if (this.isTransitioning || index === this.currentIndex) return;
        
        this.currentIndex = index;
        this.updateMainImage();
        this.updateThumbnailSelection();
        this.updateImageCounter();
    }

    switchUnit(unit) {
        this.currentUnit = unit;
        this.updateUnitTabs();
        // Here you could load different images based on unit
        // For now, we'll just update the UI
    }

    updateMainImage() {
        const $image = $('#fslightboxImage');
        
        // Add fade out effect
        $image.addClass('image-fade');
        
        setTimeout(() => {
            $image.attr('src', this.images[this.currentIndex]);
            $image.removeClass('image-fade').addClass('show');
        }, 150);
    }

    updateThumbnailSelection() {
        $('.thumbnail-item').removeClass('active');
        $(`.thumbnail-item[data-index="${this.currentIndex}"]`).addClass('active');
        
        // Scroll thumbnail into view
        const $activeThumb = $(`.thumbnail-item[data-index="${this.currentIndex}"]`);
        const $container = $('#thumbnailGallery');
        const containerWidth = $container.width();
        const thumbWidth = 80 + 8; // width + gap
        const thumbPosition = this.currentIndex * thumbWidth;
        
        if (thumbPosition > containerWidth / 2) {
            $container.scrollLeft(thumbPosition - containerWidth / 2 + thumbWidth / 2);
        } else {
            $container.scrollLeft(0);
        }
    }

    updateImageCounter() {
        $('#imageCounter').text(`${this.currentIndex + 1} of ${this.images.length}`);
    }

    updateUnitTabs() {
        $('.unit-tab').removeClass('btn-primary active').addClass('btn-outline-light');
        $(`.unit-tab[data-unit="${this.currentUnit}"]`).removeClass('btn-outline-light').addClass('btn-primary active');
    }

    populateThumbnails() {
        const $gallery = $('#thumbnailGallery');
        $gallery.empty();
        
        this.images.forEach((image, index) => {
            const thumbnail = `
                <div class="thumbnail-item ${index === 0 ? 'active' : ''}" data-index="${index}">
                    <img src="${image}" alt="Thumbnail ${index + 1}">
                </div>
            `;
            $gallery.append(thumbnail);
        });
    }
}

// Initialize Owl Carousel for main slider
$(document).ready(function() {
    // Initialize custom FSLightbox
    const fslightbox = new CustomFSLightbox();
    
    // Initialize main image slider
    let owl = $('#imageSlider');
    owl.owlCarousel({
        items: 1,
        nav: false,
        dots: false,
        loop: true,
        margin: 10,
        autoplay: false
    });

    // Main slider navigation
    $('#prevSlideBtn').click(function () {
        owl.trigger('prev.owl.carousel');
        updateDotIndicator();
    });

    $('#nextSlideBtn').click(function () {
        owl.trigger('next.owl.carousel');
        updateDotIndicator();
    });

    // Dot indicator functionality
    function updateDotIndicator() {
        const currentSlide = owl.find('.owl-item.active').index();
        $('.dot-pill').removeClass('active');
        $('.dot-pill').eq(currentSlide).addClass('active');
    }

    // Initialize dot indicator
    updateDotIndicator();

    // Thumbnail click to open lightbox
    $('.thumbnail-scroll img').on('click', function() {
        const index = $(this).index();
        fslightbox.currentIndex = index;
        fslightbox.openLightbox();
    });

    // Make main slider images clickable to open lightbox
    $('#imageSlider img').on('click', function() {
        const slideIndex = $(this).closest('.owl-item').index();
        fslightbox.currentIndex = slideIndex;
        fslightbox.openLightbox();
    });
});
</script>
</body>
</html>